<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div>
    <h5>Latest Weather Observation:</h5>

    <label>Date and Time: </label><input type="text" id="dateTime" readonly />
    <label>Location Name: </label><input type="text" id="location" readonly />
    <label>latitude: </label><input type="text" id="latitude" readonly />
    <label>Longitude: </label><input type="text" id="longitude" readonly />
    <label>Temperature (Celsius): </label><input type="text" id="temperature" readonly />
    <label>Humidity (Percentage): </label><input type="text" id="humidity" readonly />
    <label>Pressure (Millibar): </label><input type="text" id="pressure" readonly />

</div>




<script src="https://unpkg.com/@microsoft/signalr@3.0.1/dist/browser/signalr.js" crossorigin="anonymous"></script>
<script>
    let connection = new signalR.HubConnectionBuilder().withUrl("/liveUpdateHub").build();

    connection.on("newObservation", (observation)=> {
        //let observation = result.arguments[0];
        document.getElementById("dateTime").value = observation.id;
        document.getElementById("location").value = observation.name;
        document.getElementById("latitude").value = observation.latitude;
        document.getElementById("longitude").value = observation.longitude;
        document.getElementById("temperature").value = observation.temperatureCelsius;
        document.getElementById("humidity").value = observation.humidity_Percentage;
        document.getElementById("pressure").value = observation.pressure_Millibar;
    });

    connection.start().then(function () {
        console.log("Connected");
    }).catch(function (err) {
        console.error(err.toString());
    });
    
</script>
</body>
</html>

